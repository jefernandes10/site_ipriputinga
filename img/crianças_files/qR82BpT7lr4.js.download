;/*FB_PKG_DELIM*/

__d("IGDLegacyTLCBundleResource",["IGDLegacyTLCMainWebWorkerResource"],(function(a,b,c,d,e,f,g){"use strict";g["default"]=c("IGDLegacyTLCMainWebWorkerResource")}),98);
__d("MAWLoadDbMigrationVersion",["MAWCurrentUser","MAWDBMigrationUtils","MAWDbAppMeta","MAWDbObjEncryption","MAWIndexedDbMetadata","Promise","WATagsLogger"],(function(a,b,c,d,e,f,g){"use strict";var h;function i(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] "," blocked"]);i=function(){return a};return a}function j(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] "," error ",""]);j=function(){return a};return a}function k(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Error accessing appMeta: ",""]);k=function(){return a};return a}function l(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Request error: ",""]);l=function(){return a};return a}function m(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] Transaction error: ",""]);m=function(){return a};return a}function n(){var a=babelHelpers.taggedTemplateLiteralLoose(["[MAWLoadDbMigrationVersion] "," onupgradeneeded - closing db"]);n=function(){return a};return a}var o=d("WATagsLogger").TAGS(["DB","MIGRATION_VERSION"]);function a(a){var c=d("MAWCurrentUser").getID(),e=d("MAWIndexedDbMetadata").dbName(c);return new(h||(h=b("Promise")))(function(b){if(!indexedDB){b();return}var c=indexedDB.open(e);c.onupgradeneeded=function(a){a.target.transaction.abort();a=a.target.result;o.LOG(n(),e);a==null?void 0:a.close();b()};c.onsuccess=function(c){var e=c.target.result;if(e==null){b();return}try{c=e.transaction("appMeta","readonly");c.onerror=function(a){o.LOG(m(),(a=a.target.error)==null?void 0:a.message);e.close();b()};c=c.objectStore("appMeta");c=c.get(d("MAWDbAppMeta").AppMetaKeysEnum.dbMigrationVersion);c.onerror=function(a){o.LOG(l(),(a=a.target.error)==null?void 0:a.message);e.close();b()};c.onsuccess=function(c){e.close();c=c.target.result;if(c!=null){c=d("MAWDbObjEncryption").decryptDbObj(babelHelpers["extends"]({},c),"appMeta",a);c=c.value.dbMigrationVersion;c!=null&&(d("MAWDBMigrationUtils").mawDbMigrationVersion.version=c)}b()}}catch(a){o.LOG(k(),a.message),e.close(),b()}};c.onerror=function(a){o.LOG(j(),e,a==null?void 0:(a=a.target)==null?void 0:(a=a.error)==null?void 0:a.message);b()};c.onblocked=function(a){a=a.target.result;o.LOG(i(),e);a==null?void 0:a.close()}})}g["default"]=a}),98);